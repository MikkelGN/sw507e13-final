\documentclass[a4paper, twoside]{memoir}% Document class
\usepackage[a4paper]{geometry}			% Margins
\usepackage{textcomp}					% Additional text symbols
\usepackage{sidecap}					% Sidecaptions
\usepackage{listings}					% Code in text.
\usepackage{courier}					% Code font.
%\usepackage{lmodern}
\usepackage{float}						% Absolute positioning
%\usepackage{rotating}					% Rotate tables.
\usepackage[utf8x]{inputenc}			% Character encoding
\usepackage{ucs}						% Extended character encoding
\usepackage{t1enc}						% More character encoding	
\usepackage[english]{babel}				% Language 
\usepackage[numbers,sort&compress]{natbib}			% Citation
\usepackage{color}						% Colors.
\usepackage{lastpage}					% Get last page
\usepackage[small,compact]{titlesec}	% No 'chapter' in chapter headings.
\usepackage[pdftex]{graphicx}					% Graphics					
\usepackage{multirow}					% Multiple rows and columns in tables.
\usepackage{pdfpages} 					% Include PDF page.
%\usepackage{wrapfig}					% Placement of images in the document.
\usepackage{amsmath, amsthm, amssymb}	% Math stuff
\usepackage{amsfonts}					% Extra font stuff
%\usepackage{lipsum}						% Lorem Ipsum
\usepackage{ulem}						% Cross characters out.
\usepackage{enumitem}					% Customizable itemize, enumerates
%\usepackage{slashbox,pict2e}			% Slashbox at the top of tables.
\usepackage{diagbox}
\graphicspath{{Media/}}					% Directory that holds images.
\usepackage[hyphens]{url}						% Url formatting
\usepackage{pbox}						% Table cell box
\usepackage{refcount}					% Extract data from references, used to determine number of pages in appendix
\usepackage{afterpage}					% Apply command to next page.
\usepackage{syntax}
\usepackage{breakurl}
\usepackage{xcolor}
\usepackage{lstlinebgrd}

\usepackage{caption}
\usepackage{subcaption}


\usepackage[draft]{fixme}                    % fixme notes

\usepackage[bookmarks=true,		
			bookmarksopen=true,
			bookmarksnumbered=true,
			colorlinks=true,
			breaklinks=true,
			linkcolor=black,
			citecolor=black,
			urlcolor=black]{hyperref}	% Cross reference, clickable links and refs.


\titleformat{\chapter}[hang]
{\normalfont\Large\bfseries}{\thechapter}{1em}{\Large}

\newcommand{\pagedifference}[2]{%
  \number\numexpr\getpagerefnumber{#2}-\getpagerefnumber{#1}\relax}
  
\counterwithin*{chapter}{part}

\makeevenhead{headings}{}{}{\textsc{\small \leftmark}}
\makeoddhead{headings}{}{}{\textsc{\small \leftmark}}
\makeevenhead{plain}{}{}{\textsc{\small \leftmark}}
\makeoddhead{plain}{}{}{\textsc{\small \leftmark}}
\makeevenfoot{headings}{}{\thepage}{}
\makeoddfoot{headings}{}{\thepage}{}
\makeheadrule{headings}{\textwidth}{0.3pt}
\makeheadrule{plain}{\textwidth}{0.3pt}
\makepagestyle{part}
\makeevenfoot{part}{}{\thepage}{}
\makeoddfoot{part}{}{\thepage}{}
\makeevenhead{part}{\textsc{Media Library}}{}{}
\makeoddhead{part}{\textsc{Media Library}}{}{}
\makeheadrule{part}{\textwidth}{0.3pt}

\bibliographystyle{unsrtnat}
\newcommand{\figref}[1]{\hyperref[#1]{Figure \ref{#1}}}
\newcommand{\tabref}[1]{\hyperref[#1]{Table \ref{#1}}}
\newcommand{\chapref}[1]{\hyperref[#1]{Chapter \ref{#1}}}
\newcommand{\secref}[1]{\hyperref[#1]{Section \ref{#1}}}
\newcommand{\subsecref}[1]{\hyperref[#1]{Subsection \ref{#1}}}
\newcommand{\lstref}[1]{\hyperref[#1]{List \ref{#1}}}
\newcommand{\appref}[1]{\hyperref[#1]{Appendix \ref{#1}}}
\renewcommand{\eqref}[1]{\hyperref[#1]{Equation (\ref{#1})}}
\newcommand{\setof}[2]{\ensuremath{\{ #1 \mid #2 \}}}
\newcommand{\set}[1]{\ensuremath{\{ #1 \}}}

\setcounter{tocdepth}{3}

\titleformat{\chapter}{\Huge\bfseries}{\thechapter}{1em}{}
\titleformat{\section}{\LARGE\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\Large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries}{\thesubsubsection}{1em}{}

\renewcommand*\lstlistingname{List}

\setlength{\parindent}{10pt}
%\nonzeroparskip 

\setcounter{secnumdepth}{2} % Numbered subsections?

\let\tmp\oddsidemargin
\let\oddsidemargin\evensidemargin
\let\evensidemargin\tmp
\reversemarginpar

\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
\definecolor{lgray}{rgb}{0.86,0.86,0.86}
\definecolor{baige}{rgb}{0.92,0.92,0.92}
\lstdefinestyle{sharpc}{language=[Sharp]C,
  showspaces=false,
  showtabs=false,
  breaklines=true,
  showstringspaces=false,
  breakatwhitespace=true,
  escapeinside={(*@}{@*)},
  commentstyle=\color{greencomments},
  keywordstyle=\color{bluekeywords},
  stringstyle=\color{redstrings},
  basicstyle=\ttfamily\small,
  frame=tb,
  numbers=left, 
  stepnumber=1, 
  numberstyle=\tiny, 
  numbersep=10pt,
  captionpos = b,
  linebackgroundcolor={\ifodd\value{lstnumber}\color{lgray}\else\color{baige}\fi}
  }
\lstset{style=sharpc}